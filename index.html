<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Discord Invite Info</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: white;
    padding: 2rem;
    max-width: 600px;
    margin: auto;
  }
  .server-info {
    display: flex;
    gap: 20px;
    align-items: flex-start;
  }
  img.icon {
    width: 128px;
    height: 128px;
    border-radius: 16px;
    background: #2c2f33;
  }
  .details {
    flex-grow: 1;
  }
  .details strong {
    color: white;
  }
  .details .green {
    color: #57f287;
  }
  .details p {
    margin: 5px 0;
  }
</style>
</head>
<body>

<h1>Discord Invite Info</h1>
<input type="text" id="inviteInput" placeholder="Enter Discord invite code" style="padding:8px; width: 250px;" />
<button onclick="fetchInvite()">Fetch Info</button>

<div id="result" style="margin-top: 2rem;"></div>

<script>
  async function fetchInvite() {
    const inviteCode = document.getElementById('inviteInput').value.trim();
    const result = document.getElementById('result');
    result.innerHTML = 'Loading...';

    if (!inviteCode) {
      result.innerHTML = `<p style="color:red;">Please enter an invite code.</p>`;
      return;
    }

    try {
      // Fetch invite info with member counts
      const res = await fetch(`https://discord.com/api/invites/${inviteCode}?with_counts=true`);

      if (!res.ok) throw new Error('Invite not found or invalid.');

      const data = await res.json();
      const guild = data.guild;

      // Build icon URL
      const iconUrl = guild.icon
        ? `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png?size=128`
        : '';

      // Banner URL (optional)
      const bannerUrl = guild.banner
        ? `https://cdn.discordapp.com/banners/${guild.id}/${guild.banner}.png?size=512`
        : '';

      // Format invite expiration (optional)
      const expiresAt = data.expires_at
        ? new Date(data.expires_at).toLocaleString()
        : 'No expiration';

      // Build HTML
      result.innerHTML = `
        <div class="server-info">
          <img class="icon" src="${iconUrl}" alt="Server Icon" />
          <div class="details">
            <p><strong>Server name:</strong> <span class="green">${guild.name}</span></p>
            <p><strong>Member count:</strong> <span class="green">${data.approximate_member_count}</span></p>
            <p><strong>Online Users:</strong> <span class="green">${data.approximate_presence_count}</span></p>
            <p><strong>Server description:</strong><br>${guild.description || 'No description'}</p>
            <p><strong>Is NSFW:</strong> <span class="green">${guild.nsfw_level === 0 ? 'No' : 'Yes'}</span></p>
            <p><strong>Invite expiration date:</strong> <span class="green">${expiresAt}</span></p>
          </div>
        </div>
      `;

      if (bannerUrl) {
        const bannerImg = document.createElement('img');
        bannerImg.src = bannerUrl;
        bannerImg.alt = 'Server Banner';
        bannerImg.style.width = '100%';
        bannerImg.style.borderRadius = '12px';
        bannerImg.style.marginTop = '1rem';
        result.appendChild(bannerImg);
      }
    } catch (error) {
      result.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
    }
  }
</script>

</body>
</html>
